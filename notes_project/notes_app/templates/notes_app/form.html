<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>{{ title }} - Task Manager</title>
    {% load static %}
    <link rel="stylesheet" href="{% static 'notes_app/css/styles.css' %}">
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" rel="stylesheet">
</head>
<body>
    <div class="container">
        <header class="header">
            <a href="{% url 'list_tasks' %}" class="back-btn">
                <i class="fas fa-arrow-left"></i> Back to Tasks
            </a>
            <h1><i class="fas fa-{% if task %}edit{% else %}plus{% endif %}"></i> {{ title }}</h1>
        </header>

        {% if messages %}
            <div class="messages">
                {% for message in messages %}
                    <div class="message {{ message.tags }}">
                        {{ message }}
                        <button class="close-btn" onclick="this.parentElement.style.display='none'">&times;</button>
                    </div>
                {% endfor %}
            </div>
        {% endif %}

        <main class="form-container">
            <form method="POST" class="task-form">
                {% csrf_token %}
                
                <div class="form-group">
                    <label for="{{ form.title.id_for_label }}">
                        <i class="fas fa-heading"></i> Title <span class="required">*</span>
                    </label>
                    {{ form.title }}
                    {% if form.title.errors %}
                        <div class="error-message">
                            {{ form.title.errors }}
                        </div>
                    {% endif %}
                </div>

                <div class="form-group">
                    <label for="{{ form.description.id_for_label }}">
                        <i class="fas fa-align-left"></i> Description
                    </label>
                    {{ form.description }}
                    {% if form.description.errors %}
                        <div class="error-message">
                            {{ form.description.errors }}
                        </div>
                    {% endif %}
                </div>

                <div class="form-row">
                    <div class="form-group">
                        <label for="{{ form.priority.id_for_label }}">
                            <i class="fas fa-flag"></i> Priority
                        </label>
                        {{ form.priority }}
                        {% if form.priority.errors %}
                            <div class="error-message">
                                {{ form.priority.errors }}
                            </div>
                        {% endif %}
                    </div>

                    <div class="form-group">
                        <label for="{{ form.due_date.id_for_label }}">
                            <i class="fas fa-calendar"></i> Due Date
                        </label>
                        {{ form.due_date }}
                        {% if form.due_date.errors %}
                            <div class="error-message">
                                {{ form.due_date.errors }}
                            </div>
                        {% endif %}
                    </div>
                </div>

                <div class="form-actions">
                    <button type="submit" class="btn btn-primary">
                        <i class="fas fa-save"></i> 
                        {% if task %}Update Task{% else %}Add Task{% endif %}
                    </button>
                    <a href="{% url 'list_tasks' %}" class="btn btn-secondary">
                        <i class="fas fa-times"></i> Cancel
                    </a>
                </div>
            </form>
        </main>
    </div>

    {% load static %}
    <script src="{% static 'notes_app/js/scripts.js' %}"></script>
</body>
</html>
